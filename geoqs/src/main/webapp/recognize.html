<html>
<head>
<script src="content/js/jquery.min.js" type="text/javascript"></script>
<script src="content/js/ajaxfileupload.js" type="text/javascript"></script>
<style type="text/css">
.main{
	text-align: center;
	width:1000px;
	margin:0 auto;
}
.input_value{
	width: 300px;
	margin-top: 5px;
}
.button_container
{
	height: 45px;
	margin-top: 20px;
}
.input_container
{
	height: 35px;
}
.image_container
{
 	margin-top: 20px;
}
</style>
</head>
<body>
	<div class="main">
	    <h3>请选择图片文件：JPG/GIF</h3>
		<form name="form0" enctype="multipart/form-data" method="post" id="form0" action="face/recognize">
			<div class="input_container">用户头像：<input type="file" name="file" id="file0" multiple="multiple" class="input_value"/></div>
			<div class="button_container"><input type="submit" value="提交"/></div>
			<div class="image_container"><img src="" id="img0"/></div>
		</form>
	</div>
</body>
</html>
<script type="text/javascript">

$("#file0").change(function(){
    var objUrl = getObjectURL(this.files[0]) ;
    console.log("objUrl = "+objUrl) ;
    if (objUrl) {
        $("#img0").attr("src", objUrl) ;
    }
});

//建立一個可存取到該file的url
function getObjectURL(file) {
    var url = null ; 
    if (window.createObjectURL!=undefined) { // basic
        url = window.createObjectURL(file) ;
    } else if (window.URL!=undefined) { // mozilla(firefox)
        url = window.URL.createObjectURL(file) ;
    } else if (window.webkitURL!=undefined) { // webkit or chrome
        url = window.webkitURL.createObjectURL(file) ;
    }
    return url ;
}   

function ajaxFileUpload() {
	$.ajaxFileUpload({
    	url: '/Home/Upload', //用于文件上传的服务器端请求地址
        secureuri: false, //一般设置为false
        fileElementId: 'file1', //文件上传空间的id属性  <input type="file" id="file" name="file" />
        dataType: 'HTML', //返回值类型 一般设置为json
        success: function (data, status)  //服务器成功响应处理函数
        {
            alert(data);
            $("#img1").attr("src", data);
            if (typeof (data.error) != 'undefined') {
                if (data.error != '') {
                    alert(data.error);
                } else {
                    alert(data.msg);
                }
            }
        },
        error: function (data, status, e)//服务器响应失败处理函数
        {
            alert(e);
        }
    });
}
</script>